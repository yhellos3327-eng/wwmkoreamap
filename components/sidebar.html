<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h1>ì—°ìš´ í•œêµ­ì–´ ë§µ</h1>
    <div style="display: flex; gap: 8px">
      <button id="open-web-llm-modal" class="close-btn" title="AI ì±„íŒ…">
        <div
          class="icon-mask"
          style="
            --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='11' width='18' height='10' rx='2'/%3E%3Ccircle cx='12' cy='5' r='2'/%3E%3Cpath d='M12 7v4'/%3E%3Cline x1='8' y1='16' x2='8' y2='16'/%3E%3Cline x1='16' y1='16' x2='16' y2='16'/%3E%3C/svg%3E&quot;);
          "
        ></div>
      </button>
      <a
        href="https://arca.live/b/wwmmap"
        id="open-arca-channel"
        class="close-btn"
        title="ì•„ì¹´ë¼ì´ë¸Œ ì±„ë„"
        target="_blank"
        style="display: flex; align-items: center; justify-content: center"
      >
        <img
          src="icons/arca-logo.svg"
          class="arca-logo-sidebar"
          alt="ArcaLive"
          style="width: 20px; height: 20px; filter: grayscale(100%); opacity: 0.7; transition: all 0.2s ease; object-fit: contain;"
        />
      </a>

      <button id="open-quest-guide" class="close-btn" title="í€˜ìŠ¤íŠ¸ ê°€ì´ë“œ">
        <div
          class="icon-mask"
          style="
            --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z'/%3E%3Cpath d='M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z'/%3E%3C/svg%3E&quot;);
          "
        ></div>
      </button>
      <button id="open-settings" class="close-btn" title="ì„¤ì •">
        <div
          class="icon-mask"
          style="
            --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3Cpath d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z'/%3E%3C/svg%3E&quot;);
          "
        ></div>
      </button>
      <button id="toggle-sidebar" class="close-btn" title="ë‹«ê¸°">
        <div
          class="icon-mask"
          style="
            --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='18' y1='6' x2='6' y2='18'/%3E%3Cline x1='6' y1='6' x2='18' y2='18'/%3E%3C/svg%3E&quot;);
          "
        ></div>
      </button>
    </div>
  </div>
  <div class="ad-container">
    <div class="ad-placeholder">
      <span>ê´‘ê³  ë¡œë”©ì¤‘...</span>
    </div>
  </div>

  <div class="sidebar-toolbar">
    <div class="map-selector-wrapper">
      <div class="custom-select" id="sidebar-map-select">
        <div class="select-trigger">
          <span class="icon">
            <div
              class="icon-mask"
              style="
                --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cline x1='2' y1='12' x2='22' y2='12'/%3E%3Cpath d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'/%3E%3C/svg%3E&quot;);
                width: 16px;
                height: 16px;
              "
            ></div>
          </span>
          <span class="selected-text">ì²­í•˜</span>
          <span class="arrow">
            <div
              class="icon-mask"
              style="
                --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E&quot;);
                width: 12px;
                height: 12px;
              "
            ></div>
          </span>
        </div>
        <div class="select-options"></div>
      </div>
    </div>
    <div class="toolbar-divider"></div>
    <button id="sidebar-route-toggle" class="toolbar-btn" title="ê²½ë¡œ ëª¨ë“œ">
      <span class="icon">
        <div
          class="icon-mask"
          style="
            --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='6' cy='19' r='3'/%3E%3Cpath d='M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15'/%3E%3Ccircle cx='18' cy='5' r='3'/%3E%3C/svg%3E&quot;);
            width: 16px;
            height: 16px;
          "
        ></div>
      </span>
      <span class="label">ê²½ë¡œ</span>
    </button>
    <div class="toolbar-divider"></div>
    <button id="community-mode-toggle" class="toolbar-btn" title="ì»¤ë®¤ë‹ˆí‹° ëª¨ë“œ (ìœ ì € ë§ˆì»¤, ë² íƒ€ ë²„ì „)">
      <span class="icon">
        <div class="icon-mask" style="--mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='9' cy='7' r='4'/%3E%3Cpath d='M23 21v-2a4 4 0 0 0-3-3.87'/%3E%3Cpath d='M16 3.13a4 4 0 0 1 0 7.75'/%3E%3C/svg%3E&quot;); width: 16px; height: 16px;"></div>
      </span>
      <span class="label">ì»¤ë®¤ë‹ˆí‹°</span>
    </button>
  </div>

  <div class="search-container">
    <div class="search-wrapper">
      <div
        class="icon-mask search-icon"
        style="
          --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E&quot;);
        "
      ></div>
      <input
        type="text"
        id="search-input"
        placeholder="ì§€ì—­, ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰..."
      />
    </div>
    <div id="search-results" class="search-results hidden"></div>
  </div>

  <div class="tabs">
    <button class="tab-btn active" data-tab="category-tab">
        <div class="icon-mask" style="--mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='3' width='7' height='7'/%3E%3Crect x='14' y='3' width='7' height='7'/%3E%3Crect x='14' y='14' width='7' height='7'/%3E%3Crect x='3' y='14' width='7' height='7'/%3E%3C/svg%3E&quot;);"></div>
        ì¹´í…Œê³ ë¦¬
    </button>
    <button class="tab-btn" data-tab="region-tab">
        <div class="icon-mask" style="--mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z'/%3E%3Ccircle cx='12' cy='10' r='3'/%3E%3C/svg%3E&quot;);"></div>
        ì§€ì—­
    </button>
    <button class="tab-btn" data-tab="favorite-tab">
        <div class="icon-mask" style="--mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z'/%3E%3C/svg%3E&quot;);"></div>
        ì¦ê²¨ì°¾ê¸°
    </button>
  </div>

  <div class="filter-container">
    <div id="category-tab" class="tab-content active">
      <div class="translation-progress-container">
        <div class="progress-header">
          <span class="progress-title">
            <span class="progress-title-icon">
              <div
                class="icon-mask"
                style="
                  --mask-url: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m5 8 6 6'/%3E%3Cpath d='m4 14 6-6 2-3'/%3E%3Cpath d='M2 5h12'/%3E%3Cpath d='M7 2h1'/%3E%3Cpath d='m22 22-5-10-5 10'/%3E%3Cpath d='M14 18h6'/%3E%3C/svg%3E&quot;);
                  width: 16px;
                  height: 16px;
                "
              ></div>
            </span>
            í•œê¸€í™” ì§„í–‰ë„
          </span>
          <span class="progress-percent" id="trans-percent">0%</span>
        </div>
        <div class="progress-bar-bg">
          <div class="progress-bar-fill" id="trans-bar" style="width: 0%"></div>
        </div>
        <div class="progress-stats" id="trans-stats">0 / 0 í•­ëª© ë²ˆì—­ë¨</div>
      </div>
      <div class="tab-actions">
        <button id="btn-toggle-cat" class="btn-toggle-all">ğŸ‘ï¸ ëª¨ë‘ ë„ê¸°</button>
        <button id="btn-complete-cat" class="btn-action-all" title="í˜„ì¬ í‘œì‹œëœ í•­ëª© ëª¨ë‘ ì™„ë£Œ">âœ“</button>
        <button id="btn-reset-cat" class="btn-action-all" title="í˜„ì¬ í‘œì‹œëœ í•­ëª© ì´ˆê¸°í™”">â†»</button>
      </div>
      <div id="category-list" class="category-list">
        <!-- Skeleton placeholders shown while loading -->
        <div class="skeleton-cate-item" aria-hidden="true">
          <div class="skeleton skeleton-cate-icon"></div>
          <div class="skeleton-cate-info">
            <div class="skeleton skeleton-cate-name"></div>
            <div class="skeleton skeleton-cate-count"></div>
          </div>
        </div>
        <div class="skeleton-cate-item" aria-hidden="true">
          <div class="skeleton skeleton-cate-icon"></div>
          <div class="skeleton-cate-info">
            <div class="skeleton skeleton-cate-name"></div>
            <div class="skeleton skeleton-cate-count"></div>
          </div>
        </div>
        <div class="skeleton-cate-item" aria-hidden="true">
          <div class="skeleton skeleton-cate-icon"></div>
          <div class="skeleton-cate-info">
            <div class="skeleton skeleton-cate-name"></div>
            <div class="skeleton skeleton-cate-count"></div>
          </div>
        </div>
        <div class="skeleton-cate-item" aria-hidden="true">
          <div class="skeleton skeleton-cate-icon"></div>
          <div class="skeleton-cate-info">
            <div class="skeleton skeleton-cate-name"></div>
            <div class="skeleton skeleton-cate-count"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="region-tab" class="tab-content">
      <div class="tab-actions">
        <button id="btn-toggle-reg" class="btn-toggle-all">ğŸ‘ï¸ ëª¨ë‘ ë„ê¸°</button>
        <button id="btn-complete-reg" class="btn-action-all" title="í˜„ì¬ í‘œì‹œëœ ì§€ì—­ ëª¨ë‘ ì™„ë£Œ">âœ“</button>
        <button id="btn-reset-reg" class="btn-action-all" title="í˜„ì¬ í‘œì‹œëœ ì§€ì—­ ì´ˆê¸°í™”">â†»</button>
      </div>
      <div id="region-list" class="category-list region-grid">
        <!-- Skeleton placeholders for regions -->
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
        <div class="skeleton skeleton-region-item" aria-hidden="true"></div>
      </div>
    </div>

    <div id="favorite-tab" class="tab-content">
      <div id="favorite-list" class="favorite-list">
        <p class="empty-msg">ì¦ê²¨ì°¾ê¸°í•œ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
      </div>
    </div>
  </div>
</aside>

<style>
.tab-actions {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 8px;
    margin-bottom: 20px;
}

#region-tab .tab-actions {
    grid-template-columns: 1fr auto auto auto;
}

.btn-toggle-all {
    width: 100%;
    margin-bottom: 0 !important;
    height: 42px;
    font-size: 0.95em;
}

.btn-action-all {
    width: 42px;
    height: 42px;
    background: var(--bg-item);
    border: 1px solid var(--border);
    color: var(--text-muted);
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 1.2em;
    position: relative;
    overflow: hidden;
}

.btn-action-all:hover {
    background: var(--bg-item-hover);
    border-color: var(--text-muted);
    color: var(--text-main);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.btn-action-all:active {
    transform: translateY(0);
}

/* Tooltip style for better accessibility */
.btn-action-all::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-8px);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    z-index: 10;
}

.btn-action-all:hover::after {
    opacity: 1;
    transition-delay: 0.5s;
}

/* Special styling for the list select button */
#btn-open-region-modal {
    width: auto;
    padding: 0 12px;
    font-size: 0.9em;
    font-weight: 600;
    gap: 6px;
}
</style>
